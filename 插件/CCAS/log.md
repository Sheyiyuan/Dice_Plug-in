# Combat&Chases Assist System日志

作者：社亦园（2125107118@qq.com）

>本日志于2023年5月12日开始编写，此时Combat&Chases Assist System的版本为0.2.3，故版本记录从0.2.3开始，要了解之前的版本请自行翻阅代码中的注释。

>本日志旨在对版本功能和开发计划进行记录，详情请查看各个版本的帮助文档（如果之后我有写的话）。

## 前言
这个插件的想法由冰红茶先行提出，他认为我们可以编写一个插件来进行coc战斗与追逐进行时的辅助，让指令更加简单，并加入自动排序的功能。

说实话，最开始我并不理解他写这个插件的意义，因为战斗排序和结算必须依靠大量的数据比较，相比于在战斗开始前录入一堆数据，我更倾向于让守秘人自行处理而非让骰子来处理。我能够想到这样做的唯一好处就是在整理log的时候工作量会大大减小。

但在我参考规则书列出了我们插件的目标功能后，我突然眼前一亮，立刻意识到了这个插件的意义所在：

```
目标功能
1. 通用基本功能
  1.1 判定建立战斗与追逐
  1.2 NPC 数据录入
2. 战斗辅助系统
  2.1 自动敏捷排序
    2.1.1 直接排序
    2.1.2 含有突袭的排序
    2.1.3 含有先攻检定的排序
  2.2 自动计算伤害
  2.3 自动计算战技
3. 追逐辅助系统
  3.1 辅助建立追逐
    3.1.1 自动判定追逐
    3.1.2 自动排序与行动点计算
  3.2 追逐实况报表
    3.2.1 自动更新打点计时器
    3.2.2 实时行动点显示
    3.2.3 险境与障碍标注
```

这个插件的核心在于第3部分，也就是关于追逐的辅助，在我们之前的跑团之中，我们就已经深刻认识到了这个不受人待见的冷门官规最大的问题：麻烦。

从位置的变更记录到行动点的计算，每个环节都很难让人不怀疑C社里是不是都是人性计算器。在我们几次尝试后，我们对追逐规则做出了一个很中肯的评价：从结果上讲，这个规则很成功，很好玩；但是从过程体验来讲，就\*cw粗口\*。我们一场追逐5轮花了一个多小时，其中大部分时间都浪费在了画图标位置和计算行动点这两件事上。

在这之后，我又想出了一个办法，用一个二维向量$(x,m)$来表示追逐中各个单位的状态，经过我们的测试，这个办法可以有效解决效率问题，让追逐轮的速度与战斗轮接近。但是这个方法的缺点也很明显，向量在表现位移时非常不直观，这对于当时还是高三牲的我们来说都足够抽象，更不用说推广开了。于是我也很快忘记了这回事，直到这份目标功能的列出。

归根结底，追逐规则最大的问题在于付出与收益并不匹配。即使它不完善，并不代表它一无是处，如果能够借助骰子将这个向量组转化为打点计时器图像，那么追逐的时间和精力成本就变得几乎和战斗一样了。这个插件便是我们所设想出的解决方案。

但愿我们的这一份项目能够发挥作用。

**warning**：由于作者对插件开发没有任何经验，可能会让整个插件中充斥各种无效语句，缺陷之处还请各位批评指正。

## 目录

[TOC]

## 更新记录

### 0.2.3

实现了以下功能：
- NPC录入，删除。
- 不同战斗规则切换。检定会根据房规设定，但目前仅支持内置的0-5号规则。
- 列出参战单位。
- 按既定规则进行战斗轮排序。
